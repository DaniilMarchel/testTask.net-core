<div class="container" *ngIf="!isSubmit; else response">
    <form [formGroup]="form" (ngSubmit)="submit()">
      <div class="ribbon"><span class="text-ribbon">Напишите нам</span></div>
      <div class="form-group row">
        <div class="col-3">
          <span>Ваше имя:</span>
        </div>
        <div class="col-9">
          <input type="text" class="form-control" id="name" formControlName="name">

          <div *ngIf="form.get('name').invalid && form.get('name').touched" class="validation">
            <small *ngIf="form.get('name').errors.required">Поле не может быть пустым</small>
          </div>

        </div>
      </div>

      <div class="form-group row">
        <div class="col-3">
          <span>Ваш Email:</span>
        </div>
        <div class="col-9">
          <input type="text" class="form-control" id="email" formControlName="email">

          <div *ngIf="form.get('email').invalid && form.get('email').touched" class="validation">
            <small *ngIf="form.get('email').errors.required">
              Поле email не может быть пустым
            </small>
            <small *ngIf="form.get('email').errors.email">
              Введите корректный email
            </small>
          </div>

        </div>
      </div>

      <div class="form-group row">
        <div class="col-3">
          <span>Ваш телефон:</span>
        </div>
        <div class="col-9">
          <input type="text" class="form-control" id="phone" formControlName="phone" [showMaskTyped]="true" prefix="+7" mask=" (000) 000-00-00">
          
          <div *ngIf="form.get('phone').invalid && form.get('phone').touched" class="validation">
            <small>Поле должно быть заполнено</small>
          </div>

        </div>
      </div>

      <div class="form-group row">
        <div class="col-3">
          <span>Тема:</span>
        </div>
        <div class="col-9">
          <select class="form-control" id="topic" formControlName="topic">
            <option value="Техподдержка">Техподдержка</option>
            <option value="Продажи">Продажи</option>
            <option value="Другое">Другое</option>
            <option value="Брак">Брак</option>
          </select>
        </div>
      </div>

      <div class="form-group row">
        <div class="col-3">
          <span>Ваше сообщение:</span>
        </div>
        <div class="col-9">
          <textarea class="form-control" rows="4" formControlName="text"></textarea>

          <div *ngIf="form.get('text').invalid && form.get('text').touched" class="validation">
            <small *ngIf="form.get('text').errors.required">Поле не может быть пустым</small>
          </div>

        </div>
      </div>

      <div class="form-group row">
        <div class="col-3">
          <span>Цифры:</span>
        </div>
        <div class="col-9 form-inline">
          <input type="text" class="form-control" #captcha>
          <canvas id="captcha" width="100" height="26" #myCanvas></canvas>
          <div class="validation"><small>{{ error }}</small></div>
        </div>
      </div>

      <div class="form-group row">
        <div class="col-3"></div>
        <div class="col-9">
          <button type="submit">Отправить письмо!</button>
        </div>
      </div>
    </form>
</div>

<ng-template #response>
  <div class="container-fluid">
    <div class="row justify-content-center">
      <div class="col-8">
        <table class="table table-light">
          <thead class="thead-light">
            <tr>
              <th scope="col">Имя</th>
              <th scope="col">Email</th>
              <th scope="col">Телефон</th>
              <th scope="col">Тема</th>
              <th scope="col">Сообщение</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>{{ formData.name }}</td>
              <td>{{ formData.email }}</td>
              <td>{{ formData.phone }}</td>
              <td>{{ formData.topic }}</td>
              <td>{{ formData.text }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <div class="row justify-content-center">
      <button class="btn btn-light justify-content-center" (click)="back()">Вернуться к форме</button>
    </div>
  </div>
</ng-template>
